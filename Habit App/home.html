
<html>
	<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1">
        <meta name="author" content="shenjiayu, sjy19930312@gmail.com">
        <meta name="description" content="...">
        <title>Anyobjects</title>
        <link rel="stylesheet" href="static/css/bootstrap.min.css">
        <!-- æˆ–è®¸å¤§æ¦‚å¯èƒ½ä¹Ÿè®¸ä»¥åä¼šç”¨å¾—åˆ°å§<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> -->
        <link rel="stylesheet" type="text/css" href="static/css/paper.css">
        <link rel="stylesheet" type="text/css" href="static/css/sweetalert.css">
        <link href="http://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" rel="stylesheet" type="text/css">
        <script type="text/javascript" src="static/js/jquery-2.1.4.min.js"></script>
        <script src="static/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="static/js/sweetalert.min.js"></script>
        <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/twemoji/1.3.2/twemoji.min.js"></script> -->
    </head>
<body>
	<style type="text/css">
	.emoji {
		cursor: pointer;
	}
	</style>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<h2 class="text-center">H@bits</h2>
			</div>
		</div>
		<div class="row">
			<div class="col-md-4 col-md-offset-2">
				<h5>Habit(s) to develop:</h5>
				<div class="list-group" id="habits-container">
					<a href="#" class="list-group-item" onclick="checkin(1)">
					<span class="label label-warning pull-right">ç¬¬ä¸€é˜¶æ®µ</span>
					<div class="progress">
						<div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="21" style="width:1%" id="progress-1">
						</div>
					</div>
					</a>
				</div>
			</div>
			<div class="col-md-4">
				<h5 class="text-center">Develop one single habit in 21 days.</h5>
				<div class="form">
					<div class="form-group">
						<input placeholder="New Habit" id="habit" type="text" class="form-control" onkeydown="if (event.keyCode == 13) newHabit();">
					</div>
					<div class="form-group text-center">
						<a href="javascript:;" onclick="newHabit()" class="btn btn-fill btn-primary">Save</a>
					</div>
				</div>
				<p><strong>ç¬¬ä¸€é˜¶æ®µï¼š1ï½7å¤©å·¦å³ã€‚</strong>æ­¤é˜¶æ®µçš„ç‰¹å¾æ˜¯â€œåˆ»æ„ï¼Œä¸è‡ªç„¶â€ã€‚ä½ éœ€è¦ååˆ†åˆ»æ„æé†’è‡ªå·±æ”¹å˜ï¼Œè€Œä½ ä¹Ÿä¼šè§‰å¾—æœ‰äº›ä¸è‡ªç„¶ï¼Œä¸èˆ’æœã€‚<br><strong>ç¬¬äºŒé˜¶æ®µï¼š7ï½21å¤©å·¦å³ã€‚</strong>ä¸è¦æ”¾å¼ƒç¬¬ä¸€é˜¶æ®µçš„åŠªåŠ›ï¼Œç»§ç»­é‡å¤ï¼Œè·¨å…¥ç¬¬äºŒé˜¶æ®µã€‚æ­¤é˜¶æ®µçš„ç‰¹å¾æ˜¯ï¼šâ€œåˆ»æ„ï¼Œè‡ªç„¶â€ã€‚ä½ å·²ç»è§‰å¾—æ¯”è¾ƒè‡ªç„¶ï¼Œæ¯”è¾ƒèˆ’æœäº†ï¼Œä½†æ˜¯ä¸€ä¸ç•™æ„ï¼Œä½ è¿˜ä¼šå›å¤åˆ°ä»å‰ã€‚å› æ­¤ï¼Œä½ è¿˜éœ€è¦åˆ»æ„æé†’è‡ªå·±æ”¹å˜ã€‚<br><strong>ç¬¬ä¸‰é˜¶æ®µï¼š21å¤©ä¹‹åã€‚</strong>æ­¤é˜¶æ®µçš„ç‰¹å¾æ˜¯â€œä¸ç»æ„ï¼Œè‡ªç„¶â€ï¼Œå…¶å®è¿™å°±æ˜¯ä¹ æƒ¯ã€‚è¿™ä¸€é˜¶æ®µè¢«ç§°ä¸ºâ€œä¹ æƒ¯æ€§çš„ç¨³å®šæœŸâ€ã€‚ä¸€æ—¦è·¨å…¥æ­¤é˜¶æ®µï¼Œä¸€ä¸ªäººå·²ç»å®Œæˆäº†è‡ªæˆ‘æ”¹é€ ï¼Œè¿™é¡¹ä¹ æƒ¯å°±å·²ç»æˆä¸ºä»–ç”Ÿå‘½ä¸­çš„ä¸€ä¸ªæœ‰æœºç»„æˆéƒ¨åˆ†ï¼Œå®ƒä¼šè‡ªç„¶è€Œç„¶åœ°ä¸åœåœ°ä¸ºäººä»¬â€œæ•ˆåŠ³â€ã€‚<br><small>Don't give up until it becomes to be part of you. Fighting~</small></p>
			</div>
		</div>
	</div>
	<div class="modal fade checkin-box" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
		<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        		<h4 class="modal-title">Achievement Box</h4>
      		</div>
      		<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-12">
							<div class="form">
								<div class="form-group">
									<textarea class="form-control" placeholder="Leave comments to yourself~" id="comment"></textarea>
								</div>
								<div class="form-group">
								<small>Emoji icons is coming soon.</small>
								</div>
								<!--
								<div class="form-group">
									<img draggable="false" class="emoji" alt="ğŸ˜€" src="http://twemoji.maxcdn.com/36x36/1f600.png" data-value="\u1f600">
									<img draggable="false" class="emoji" alt="ğŸ˜" src="http://twemoji.maxcdn.com/36x36/1f601.png" data-value="\u1f601">
									<img draggable="false" class="emoji" alt="ğŸ˜‚" src="http://twemoji.maxcdn.com/36x36/1f602.png" data-value="\u1f602">
									<img draggable="false" class="emoji" alt="ğŸ˜ƒ" src="http://twemoji.maxcdn.com/36x36/1f603.png" data-value="\u1f603">
									<img draggable="false" class="emoji" alt="ğŸ˜…" src="http://twemoji.maxcdn.com/36x36/1f604.png" data-value="\u1f604">
									<img draggable="false" class="emoji" alt="ğŸ˜†" src="http://twemoji.maxcdn.com/36x36/1f605.png" data-value="\u1f605">
									<img draggable="false" class="emoji" alt="ğŸ˜‡" src="http://twemoji.maxcdn.com/36x36/1f606.png" data-value="\u1f606">
									<img draggable="false" class="emoji" alt="ğŸ˜ˆ" src="http://twemoji.maxcdn.com/36x36/1f607.png" data-value="\u1f607">
									<img draggable="false" class="emoji" alt="ğŸ˜‰" src="http://twemoji.maxcdn.com/36x36/1f608.png" data-value="\u1f608">
									<img draggable="false" class="emoji" alt="ğŸ˜Š" src="http://twemoji.maxcdn.com/36x36/1f609.png" data-value="\u1f609">
									<img draggable="false" class="emoji" alt="ğŸ˜‹" src="http://twemoji.maxcdn.com/36x36/1f610.png" data-value="\u1f610">
								</div>
								-->
								<div class="form-group text-center">
									<button class="btn btn-fill btn-info" onclick="go()" id="go-button">Go</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>
	</div>
	<input type="hidden" id="csrf">
    <script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="js/uuid.js"></script>
	<script type="text/javascript" src="js/protype_extension.js"></script>
    <script type="text/javascript" src="js/store2Bjson2.min.js"></script>
	<script type="text/javascript">
/*         window.onload = function() {
        	var mycsrf=window.localStorage.getItem("mycsrf");
            console.log(mycsrf);
            $("#habit").val(mycsrf);
        } */
		window.onload=function(){
        }
		function newHabit() {
/* 			var habit = $("#habit").val().trim();
			if (habit == "") {
				swal({title: "warning", text: "Please enter habit!", type: "warning"});
				return false;
			}

			var d = new Date();
			var lastUpdated = d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
			var dataJson = {"content": habit, "lastUpdated": lastUpdated, "csrf": $("#csrf").val()};
			$.ajax({
				url: "/habit/new",
				type: "post",
				dataType: "json",
				data: dataJson,
				cache: false,
				success: function(data) {
					if (data["status"] == "success") {
						var elements = data["content"].split(":");
						$("#habit").val('');
						$("#habits-container").prepend("<a href='#' class='list-group-item' onclick='checkin("+elements[0]+")'>"+elements[1]+"<span class='label label-warning pull-right'>ç¬¬ä¸€é˜¶æ®µ</span><div class='progress'><div class='progress-bar progress-bar-info' role='progressbar' aria-valuenow='"+elements[2]+"' aria-valuemin='0' aria-valuemax='21' style='width:"+parseInt(elements[2])/21*100+"%'' id='progress-"+elements[0]+"'></div></div></a>");
					} else {
						console.log(data["status"]);
					}
				}
			}); */
		}

		function checkin(id) {
/* 			if (document.getElementById("progress-"+id) == null) {
				swal({
					title: "Congratulations!", 
					text: "You may have developed this habit for yourself.", 
					type: "success",
					showCancelButton: true,
					confirmButtonColor: "#DD6B55",
					confirmButtonText: "Comment",
					closeOnConfirm: true
				},
					function(isConfirm) {
						if (isConfirm) {
							$(".checkin-box").modal("show");
							$("#go-button").attr("data-habit-id", id);
						}
					}
				);
			} else {
				swal({
					title: "warning", 
					text: "Don't forget to achieve everyday!", 
					type: "warning",
					showCancelButton: true,
					confirmButtonColor: "#DD6B55",
					confirmButtonText: "Checkin",
					closeOnConfirm: false
				},
					function() {
						var d = new Date();
						var month = (d.getMonth() + 1) > 9 ? (d.getMonth() + 1) : "0"+(d.getMonth() + 1);
						var lastUpdated = d.getFullYear() + "-" + month + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
						var dataJson = {"id": id, "lastUpdated": lastUpdated, "csrf": $("#csrf").val()};
						$.ajax({
							url: "/habit/checkin",
							type: "post",
							dataType: "json",
							data: dataJson,
							success: function(data) {
								if (data["status"] == "success") {
									var progress = $("#progress-"+id).attr("aria-valuenow");
									var progressNow = parseInt(progress) + 1;
									$("#progress-"+id).attr("aria-valuenow", progressNow);
									$("#progress-"+id).css("width", (progressNow/21*100)+"%");
									swal({
										title: "Checked!", 
										text: "You are getting closer to your goal.",
										type: "success",
										showCancelButton: true,
										confirmButtonColor: "#DD6B55",
										confirmButtonText: "Comment",
										closeOnConfirm: true
									},
									function (isConfirm) {
										if (isConfirm) {
											$(".checkin-box").modal("show");
											$("#go-button").attr("data-checkin-id", data["content"]);
										}
									}
									);
								} else {
									if (data["content"] == "DuplicateCheckin") {
										swal("Failed!", "You cannot checkin twice in one day.", "error");
									} else {
										swal("Failed", data["content"], "error");
									}
								}
							}
						});
						//
					}
				);
			} */
		}

		function go() {
/* 			var comment = $("#comment").val().trim();
			if (comment == "") {
				swal("Warning", "Please enter comment!", "warning");
				return false;
			}

			var dataJson = {"id": $("#go-button").attr("data-checkin-id"), "content": comment, "csrf": $("#csrf").val()};
			$.ajax({
				url: "/habit/checkin/comment",
				type: "post",
				dataType: "json",
				data: dataJson,
				success: function(data) {
					if (data["status"] == "success") {
						swal("Great", "You left a comment.", "success");
						$("#comment").val("");
						$(".checkin-box").modal("hide");
					} else {
						swal("Fail", data["content"], "error");
					}
				}
			}); */
		}
		/*
		$(".emoji").click(function() {
			$("#comment").val($("#comment").val() + $(this).attr("data-value"));
		});
		*/
	</script>
</body>
</html>